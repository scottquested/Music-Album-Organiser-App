(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{Hg7B:function(a,t){!function(a,t){const e=a.querySelector(".js-results"),s=a.querySelector(".js-modal-background"),i=a.querySelector(".js-modal"),l=a.querySelector(".js-modal-form"),n=a.querySelector(".js-modal-album-add"),r=a.querySelector(".js-modal-album-update"),c=a.querySelector(".js-modal-album-delete"),o=a.querySelector(".js-pagination-1"),d=a.querySelector(".js-pagination-2"),u=a.querySelector(".js-search"),m=a.querySelector(".js-show-fav");let f=[],v=0;const b=async a=>{const t=await fetch(a);return await t.json()},p=(a,t)=>{const e={id:t,album_title:a.album_title,artist:a.artist,condition:a.condition,year:a.year,fav:!1};f.push(e)},y=t=>{const s=a.createElement("div");let i="";switch(t.condition){case"poor":i='<i class="fa fa-star"></i><i class="fa fa-star"></i>';break;case"fair":i='<i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i>';break;case"very_good":i='<i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i>';break;case"mint":i='<i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i>';break;default:i='<i class="fa fa-star"></i>'}s.classList.add("col-sm-12","col-md-6","col-lg-4","mb-4"),s.innerHTML=`<article class="card h-100 js-album-card" data-id="${t.id}">\n                <div class="card-body">\n                    <h1 class="h5">${t.album_title}</h1>\n                    <h2 class="h6 mb-4">${t.artist.name}</h2>\n                    <p class="card-text">Year: ${t.year}</p>\n                    <p class="card-text">Condition: ${i}</p>\n                </div>\n                <div class="card-footer">\n                    <button class="btn btn-sm btn-dark js-album-edit">Edit Album</button>\n                    <i class="fa ${t.fav?"fa-heart":"fa-heart-o"} pull-right mt-2 js-album-fav"></i>\n                </div>\n            </article>`,e.appendChild(s)},g=()=>{s.style.display="block",i.style.display="block"},h=()=>{s.style.display="none",i.style.display="none"},L=(a="")=>{"active"===a?(m.classList.add("active"),m.querySelector("i").classList.add("fa-heart"),m.querySelector("i").classList.remove("fa-heart-o")):(m.classList.remove("active"),m.querySelector("i").classList.add("fa-heart-o"),m.querySelector("i").classList.remove("fa-heart"))},j=()=>{if(o.closest("li").classList.contains("active")){e.innerHTML="";for(let a=0;a<25;a++)y(f[a])}else{e.innerHTML="";for(let a=25;a<f.length;a++)y(f[a])}},q=a=>{const t=i.getAttribute("data-id"),e=f.map(a=>a.id).indexOf(parseInt(t));if("edit"===a){f[e]={id:parseInt(t),album_title:l.elements.albumTitle.value,artist:{name:l.elements.artist.value,id:f[e].artist.id},year:l.elements.year.value,condition:l.elements.condition.value,fav:f[e].fav};f.filter(a=>a.artist.id===f[e].artist.id).map(a=>a.id).map((a,t)=>{f[a].artist.name=l.elements.artist.value})}else"delete"===a&&f.splice(e,1);L(),j(),h()};b("https://gist.githubusercontent.com/seanders/df38a92ffc4e8c56962e51b6e96e188f/raw/b032669142b7b57ede3496dffee5b7c16b8071e1/page1.json").then(a=>{const t=a.results.length;a.results.map(a=>{p(a,v),v++}),b(a.nextPage).then(a=>{a.results.map(a=>{p(a,v),v++})}).then(()=>{for(let a=0;a<t;a++)y(f[a])})}),a.body.addEventListener("click",t=>{if(t.preventDefault(),t.target.classList.contains("js-album-edit")){const a=t.target.closest(".js-album-card").getAttribute("data-id"),e=f.map(a=>a.id).indexOf(parseInt(a));c.classList.remove("d-none"),r.classList.remove("d-none"),n.classList.add("d-none"),i.setAttribute("data-id",a),g(),l.elements.albumTitle.value=f[e].album_title,l.elements.artist.value=f[e].artist.name,l.elements.year.value=f[e].year,l.elements.condition.value=f[e].condition,l.elements.albumId.value=f[e].id}if(t.target.classList.contains("js-modal-close")&&h(),t.target.classList.contains("js-pagination-1")&&(L(),d.closest("li").classList.remove("active"),t.target.closest("li").classList.add("active"),j()),t.target.classList.contains("js-pagination-2")&&(L(),o.closest("li").classList.remove("active"),t.target.closest("li").classList.add("active"),j()),t.target.classList.contains("js-modal-album-update")&&q("edit"),t.target.classList.contains("js-modal-album-delete")&&q("delete"),t.target.classList.contains("js-add-new-album")&&(c.classList.add("d-none"),r.classList.add("d-none"),n.classList.remove("d-none"),l.reset(),g()),t.target.classList.contains("js-modal-album-add")){const a=Math.max.apply(Math,f.map(a=>a.id)),t=Math.max.apply(Math,f.map(a=>a.artist.id)),e=f.map(a=>a.artist.name).indexOf(l.elements.artist.value),s={id:a+1,album_title:l.elements.albumTitle.value,artist:{name:l.elements.artist.value,id:e>=0?f[e].artist.id:t+1},year:l.elements.year.value,condition:l.elements.condition.value,fav:!1};f.push(s),j(),h()}if(t.target.classList.contains("js-album-fav")){const e=t.target.closest(".js-album-card").getAttribute("data-id"),s=f.map(a=>a.id).indexOf(parseInt(e));if(f[s].fav=t.target.classList.contains("fa-heart-o"),m.classList.contains("active"))return a.querySelector(`[data-id="${e}"]`).parentElement.remove();j()}if(t.target.classList.contains("js-show-fav"))if(t.target.classList.contains("active"))L(),j();else{L("active");const a=f.filter(a=>{if(a.fav)return f.indexOf(a)>-1});e.innerHTML="",a.map(a=>{y(a)})}}),u.addEventListener("keyup",a=>{if(a.target.value.length<2)return L(),void j();L();const t=new RegExp(a.target.value,"i"),s=f.filter(a=>t.test(a.album_title)||t.test(a.artist.name)?f.indexOf(a):void 0);e.innerHTML="",s.map(a=>{y(a)})})}(document,window)},jrKh:function(a,t,e){},sQfG:function(a,t,e){var s=e("LboF"),i=e("jrKh");"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[a.i,i,""]]);var l={insert:"head",singleton:!1};s(i,l);a.exports=i.locals||{}},tjUo:function(a,t,e){"use strict";e.r(t);e("yr8s"),e("H1Ta"),e("sQfG"),e("Hg7B")}},[["tjUo",1,2]]]);