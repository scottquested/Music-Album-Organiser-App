(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{Hg7B:function(a,t){!function(a,t){const e=a.querySelector(".js-results"),s=a.querySelector(".js-modal-background"),i=a.querySelector(".js-modal"),l=a.querySelector(".js-modal-form"),n=a.querySelector(".js-modal-album-add"),r=a.querySelector(".js-modal-album-update"),c=a.querySelector(".js-modal-album-delete"),o=a.querySelector(".js-modal-title"),d=a.querySelector(".js-pagination-1"),f=a.querySelector(".js-pagination-2"),m=a.querySelector(".js-search"),u=a.querySelector(".js-show-fav");let v=[],b=0;const p=async a=>{const t=await fetch(a);return await t.json()},g=(a,t)=>{const e={id:t,album_title:a.album_title,artist:a.artist,condition:a.condition,year:a.year,fav:!1};v.push(e)},h=t=>{const s=a.createElement("div");let i="";switch(t.condition){case"poor":i='<i class="fa fa-star"></i><i class="fa fa-star"></i>';break;case"fair":i='<i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i>';break;case"very_good":i='<i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i>';break;case"mint":i='<i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i><i class="fa fa-star"></i>';break;default:i='<i class="fa fa-star"></i>'}s.classList.add("col-sm-12","col-md-6","col-lg-4","mb-4"),s.innerHTML=`<article class="card h-100 js-album-card" data-id="${t.id}">\n                <div class="card-body">\n                    <h1 class="h5 card-body-title">${t.album_title}</h1>\n                    <h2 class="h6 mb-4 card-body-sub">${t.artist.name}</h2>\n                    <p class="card-text"><i class="fa fa-calendar"></i> ${t.year}</p>\n                    <p class="card-text">Condition: ${i}</p>\n                </div>\n                <div class="card-footer">\n                    <button class="btn btn-sm btn-dark js-album-edit">Edit Album</button>\n                    <i class="fa ${t.fav?"fa-heart":"fa-heart-o"} pull-right mt-2 js-album-fav"></i>\n                </div>\n            </article>`,e.appendChild(s)},L=()=>{s.style.display="block",i.style.display="block"},y=()=>{s.style.display="none",i.style.display="none"},j=(a="")=>{"active"===a?(u.classList.add("active"),u.querySelector("i").classList.add("fa-heart"),u.querySelector("i").classList.remove("fa-heart-o")):(u.classList.remove("active"),u.querySelector("i").classList.add("fa-heart-o"),u.querySelector("i").classList.remove("fa-heart"))},q=()=>{if(d.closest("li").classList.contains("active")){e.innerHTML="";for(let a=0;a<25;a++)h(v[a])}else{e.innerHTML="";for(let a=25;a<v.length;a++)h(v[a])}},w=a=>{const t=i.getAttribute("data-id"),e=v.map(a=>a.id).indexOf(parseInt(t));if("edit"===a){v[e]={id:parseInt(t),album_title:l.elements.albumTitle.value,artist:{name:l.elements.artist.value,id:v[e].artist.id},year:l.elements.year.value,condition:l.elements.condition.value,fav:v[e].fav};v.filter(a=>a.artist.id===v[e].artist.id).map(a=>a.id).map((a,t)=>{v[a].artist.name=l.elements.artist.value})}else"delete"===a&&v.splice(e,1);j(),q(),y()};p("https://gist.githubusercontent.com/seanders/df38a92ffc4e8c56962e51b6e96e188f/raw/b032669142b7b57ede3496dffee5b7c16b8071e1/page1.json").then(a=>{const t=a.results.length;a.results.map(a=>{g(a,b),b++}),p(a.nextPage).then(a=>{a.results.map(a=>{g(a,b),b++})}).then(()=>{for(let a=0;a<t;a++)h(v[a])})}),a.body.addEventListener("click",t=>{if(t.preventDefault(),t.target.classList.contains("js-album-edit")){const a=t.target.closest(".js-album-card").getAttribute("data-id"),e=v.map(a=>a.id).indexOf(parseInt(a));c.classList.remove("d-none"),r.classList.remove("d-none"),n.classList.add("d-none"),i.setAttribute("data-id",a),o.innerHTML="Edit album",L(),l.elements.albumTitle.value=v[e].album_title,l.elements.artist.value=v[e].artist.name,l.elements.year.value=v[e].year,l.elements.condition.value=v[e].condition,l.elements.albumId.value=v[e].id}if(t.target.classList.contains("js-modal-close")&&y(),t.target.classList.contains("js-pagination-1")&&(j(),f.closest("li").classList.remove("active"),t.target.closest("li").classList.add("active"),q()),t.target.classList.contains("js-pagination-2")&&(j(),d.closest("li").classList.remove("active"),t.target.closest("li").classList.add("active"),q()),t.target.classList.contains("js-modal-album-update")&&w("edit"),t.target.classList.contains("js-modal-album-delete")&&w("delete"),t.target.classList.contains("js-add-new-album")&&(c.classList.add("d-none"),r.classList.add("d-none"),n.classList.remove("d-none"),o.innerHTML="Add new album",l.reset(),L()),t.target.classList.contains("js-modal-album-add")){const a=Math.max.apply(Math,v.map(a=>a.id)),t=Math.max.apply(Math,v.map(a=>a.artist.id)),e=v.map(a=>a.artist.name).indexOf(l.elements.artist.value),s={id:a+1,album_title:l.elements.albumTitle.value,artist:{name:l.elements.artist.value,id:e>=0?v[e].artist.id:t+1},year:l.elements.year.value,condition:l.elements.condition.value,fav:!1};v.push(s),q(),y()}if(t.target.classList.contains("js-album-fav")){const e=t.target.closest(".js-album-card").getAttribute("data-id"),s=v.map(a=>a.id).indexOf(parseInt(e));if(v[s].fav=t.target.classList.contains("fa-heart-o"),u.classList.contains("active"))return a.querySelector(`[data-id="${e}"]`).parentElement.remove();q()}if(t.target.classList.contains("js-album-fav-edit")){const a=t.target.closest(".js-modal").getAttribute("data-id"),e=v.map(a=>a.id).indexOf(parseInt(a));t.target.classList.contains("fa-heart-o")?(t.target.classList.remove("fa-heart-o"),t.target.classList.add("fa-heart"),v[e].fav=!0):(t.target.classList.remove("fa-heart"),t.target.classList.add("fa-heart-o"),v[e].fav=!1)}if(t.target.classList.contains("js-show-fav"))if(t.target.classList.contains("active"))j(),q();else{j("active");const a=v.filter(a=>{if(a.fav)return v.indexOf(a)>-1});e.innerHTML="",a.length>0?a.map(a=>{h(a)}):e.innerHTML='<div class="col-md-12"><h2>You have no favorites at the moment</h2></div>'}}),m.addEventListener("keyup",a=>{if(a.target.value.length<2)return j(),void q();j();const t=new RegExp(a.target.value,"i"),s=v.filter(a=>t.test(a.album_title)||t.test(a.artist.name)?v.indexOf(a):void 0);e.innerHTML="",s.map(a=>{h(a)})})}(document,window)},jrKh:function(a,t,e){},sQfG:function(a,t,e){var s=e("LboF"),i=e("jrKh");"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[a.i,i,""]]);var l={insert:"head",singleton:!1};s(i,l);a.exports=i.locals||{}},tjUo:function(a,t,e){"use strict";e.r(t);e("yr8s"),e("H1Ta"),e("sQfG"),e("Hg7B")}},[["tjUo",1,2]]]);